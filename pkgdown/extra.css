/* ============================================================
   neuroatlas pkgdown theme - Albers/Homage Red

   This file applies custom styling on top of the Bootstrap 5
   template provided by albersdown. The styles mirror the
   vignettes/albers.css theme for consistency across standalone
   vignettes and the pkgdown site.
   ============================================================ */

/* ---------- Homage family: default = Homage-Red ---------- */
:root {
  /* Semantic roles */
  --ink: #111111;
  --bg: #ffffff;
  --muted: #6b7280;
  --border: #e5e7eb;
  --code-bg: #f6f8fa;
  --content: 80ch;
  --anchor-offset: 72px;

  /* Palette (Red family) */
  --A900: #CD2D26;
  --A700: #DC3925;
  --A500: #E44926;
  --A300: #E35B2D;

  /* Role aliases */
  --accent-ink-light: var(--A900);
  --accent-ink-dark: var(--A300);
  --accent-ink: var(--accent-ink-light);
  --accent-strong: var(--A700);
  --accent: var(--A500);
  --accent-tint: color-mix(in srgb, var(--A300) 8%, transparent);
}

/* Optional palette family classes */
.palette-lapis { --A900:#1B2A74; --A700:#20399C; --A500:#2C4FCC; --A300:#4968D6; }
.palette-ochre { --A900:#6F5200; --A700:#8B6700; --A500:#B48900; --A300:#D7A700; }
.palette-teal  { --A900:#0D4A4A; --A700:#0F5E5E; --A500:#127373; --A300:#2F8C8C; }
.palette-green { --A900:#1B5E20; --A700:#2E7D32; --A500:#388E3C; --A300:#66BB6A; }
.palette-violet { --A900:#4A148C; --A700:#6A1B9A; --A500:#8E24AA; --A300:#BA68C8; --accent-ink-dark:#BA68C8; }

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0c0e;
    --ink: #e6e6e6;
    --muted: #9aa0a6;
    --border: #2a2f36;
    --code-bg: #161b22;
    --accent-ink: var(--accent-ink-dark);
    --accent-tint: color-mix(in srgb, var(--A700) 18%, transparent);
  }
}

/* ---------- Core layout ---------- */
html, body {
  background: var(--bg);
  color: var(--ink);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.6;
}

/* Content width constraint */
main, .contents, .page-content {
  max-width: var(--content);
}

/* Override Bootstrap's default body background */
body {
  background-color: var(--bg) !important;
}

/* ---------- Typography ---------- */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  line-height: 1.25;
  margin-top: 32px;
  margin-bottom: 12px;
  color: var(--ink);
}

h1 { font-size: 1.9rem; text-wrap: balance; }
h2 { font-size: 1.4rem; }
h3 { font-size: 1.2rem; }

h2, h3 {
  position: relative;
  scroll-margin-top: var(--anchor-offset);
}

/* ---------- Links ---------- */
a, a:visited {
  color: var(--accent-ink) !important;
  text-decoration: underline;
  text-decoration-thickness: .08em;
  text-underline-offset: 2px;
  text-decoration-skip-ink: auto;
}

a:hover {
  color: color-mix(in srgb, var(--accent-ink) 85%, black) !important;
}

@media (prefers-color-scheme: dark) {
  a:hover {
    color: color-mix(in srgb, var(--accent-ink) 85%, white) !important;
  }
}

a:focus-visible {
  outline: 2px solid var(--accent-ink);
  outline-offset: 2px;
}

/* ---------- Code blocks ---------- */
code, pre, kbd, samp {
  font-family: ui-monospace, "SF Mono", Menlo, Consolas, "Liberation Mono", "Roboto Mono", monospace;
  font-size: 0.95em;
  line-height: 1.45;
}

pre {
  background: var(--code-bg) !important;
  border: 1px solid var(--border) !important;
  padding: 24px !important;
  border-radius: 6px !important;
  overflow: auto;
  margin-block: 24px;
  position: relative;
  box-shadow: none !important;
  tab-size: 2;
  -moz-tab-size: 2;
}

pre code {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  word-break: normal;
  overflow-wrap: anywhere;
}

/* Inline code */
p code, li code, td code {
  background: var(--code-bg);
  padding: 0.12em 0.38em;
  border-radius: 4px;
  border: 1px solid var(--border);
}

/* Code corner homage square */
pre::before {
  content: "";
  position: absolute;
  left: 10px;
  top: 10px;
  width: 10px;
  height: 10px;
  background: var(--A500);
  border-radius: 2px;
}

/* ---------- Tables ---------- */
table {
  border-collapse: collapse;
  width: 100%;
  font-variant-numeric: tabular-nums;
}

th, td {
  border-bottom: 1px solid var(--border);
  padding: 10px 8px;
}

thead th {
  font-weight: 600;
}

tbody tr:nth-child(odd) {
  background: color-mix(in srgb, var(--A300) 8%, transparent);
}

caption {
  caption-side: bottom;
  color: var(--muted);
  padding-top: 12px;
  font-size: 0.95em;
}

/* ---------- Callouts & blockquotes ---------- */
blockquote, .callout {
  border-left: 3px solid var(--A500);
  background: var(--accent-tint);
  padding: 16px 24px;
  margin-block: 24px;
  border-radius: 6px;
}

blockquote p {
  margin: 0;
}

/* ---------- Navbar styling ---------- */
.navbar {
  background-color: var(--bg) !important;
  border-bottom: 1px solid var(--border);
}

.navbar-brand {
  color: var(--ink) !important;
  font-weight: 600;
}

.nav-link {
  color: var(--ink) !important;
}

.nav-link:hover {
  color: var(--accent-ink) !important;
}

/* ---------- Hero elements ---------- */
.homage-hero {
  aspect-ratio: 3/2;
  background: var(--bg);
  box-shadow: inset 0 0 0 84px var(--A300),
              inset 0 0 0 56px var(--A500),
              inset 0 0 0 28px var(--A700),
              inset 0 0 0 0 var(--A900);
  border-radius: 4px;
  margin-block: 24px;
}

.homage-hero--letterbox {
  aspect-ratio: 6/1;
  background: var(--bg);
  box-shadow: inset 0 0 0 48px var(--A300),
              inset 0 0 0 32px var(--A500),
              inset 0 0 0 16px var(--A700),
              inset 0 0 0 0 var(--A900);
  border-radius: 4px;
  margin-block: 16px 8px;
}

/* Hairline rule with notch */
.hr-notch {
  position: relative;
  height: 1px;
  background: var(--border);
  margin: 24px 0;
}

.hr-notch::before {
  content: "";
  position: absolute;
  left: 0;
  top: -4px;
  width: 8px;
  height: 8px;
  background: var(--A500);
}

/* ---------- Anchor styling ---------- */
h2:hover .anchor,
h3:hover .anchor {
  opacity: 1;
}

h2:focus-within .anchor,
h3:focus-within .anchor {
  opacity: 1;
}

.anchor {
  opacity: 0;
  text-decoration: none !important;
  color: var(--A500) !important;
  font-weight: 700;
  transition: opacity .15s ease-in-out;
}

/* ---------- Utility ---------- */
.overview ul {
  list-style: square;
}

/* Prevent layout shift when scrollbars appear */
:root {
  scrollbar-gutter: stable both-edges;
}

/* ---------- Responsive ---------- */
@media (max-width: 880px) {
  html, body {
    font-size: 17px;
  }
  :root {
    --anchor-offset: 64px;
  }
}

/* ---------- High contrast ---------- */
@media (prefers-contrast: more) {
  :root {
    --border: color-mix(in srgb, var(--A500) 28%, white);
  }
  .hr-notch::before {
    background: var(--A700);
  }
}

/* ---------- Print ---------- */
@media print {
  a {
    text-decoration: none;
    color: inherit !important;
  }
  pre {
    page-break-inside: avoid;
  }
  .navbar, .sidebar, .toc, .page-header {
    display: none !important;
  }
}
