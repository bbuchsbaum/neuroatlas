<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with TemplateFlow in neuroatlas • neuroatlas</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with TemplateFlow in neuroatlas">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">neuroatlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/neuroatlas-overview.html">Getting Started with neuroatlas</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-templateflow.html">Working with TemplateFlow in neuroatlas</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/bbuchsbaum/neuroatlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Working with TemplateFlow in neuroatlas</h1>
                        <h4 data-toc-skip class="author">neuroatlas Dev
Team</h4>
            
            <h4 data-toc-skip class="date">2025-06-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/neuroatlas/blob/HEAD/vignettes/working-with-templateflow.Rmd"><code>vignettes/working-with-templateflow.Rmd</code></a></small>
      <div class="d-none name"><code>working-with-templateflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><a href="https://www.templateflow.org/" class="external-link">TemplateFlow</a> is a
repository of curated neuroimaging templates and atlases, accessible via
a Python client. The <code>neuroatlas</code> package provides an R
interface to TemplateFlow, allowing you to easily discover, download,
and use these resources within your R workflows.</p>
<p>This vignette provides a guide to using the TemplateFlow
functionalities in <code>neuroatlas</code>.</p>
</div>
<div class="section level2">
<h2 id="getting-started-the-templateflow-object">Getting Started: The <code>templateflow</code> Object<a class="anchor" aria-label="anchor" href="#getting-started-the-templateflow-object"></a>
</h2>
<p>The main entry point for interacting with TemplateFlow is by creating
a <code>templateflow</code> interface object. This object manages the
connection to the Python API and caching configurations.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a templateflow interface object</span></span>
<span><span class="va">tf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_templateflow.html">create_templateflow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tf</span><span class="op">)</span></span></code></pre></div>
<p>If Python or the templateflow module are not available, you’ll need
to install them first:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the Python templateflow package</span></span>
<span><span class="fu"><a href="../reference/install_templateflow.html">install_templateflow</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Running <code>print(tf)</code> (if <code>tf</code> is successfully
created) will show you: - The local cache path where TemplateFlow files
will be stored. <code>neuroatlas</code> sets this up in a user-specific
directory (e.g., <code>~/.cache/neuroatlas/templateflow</code> on
Linux). - The status of the connection to the Python API. - A few
examples of available templates and their total count.</p>
<p>Output might look like:</p>
<pre><code><span><span class="co">#&gt; &lt;neuroatlas TemplateFlow Interface&gt;</span></span>
<span><span class="co">#&gt;   Cache Path:  /Users/youruser/Library/Caches/org.R-project.R/R/neuroatlas/templateflow </span></span>
<span><span class="co">#&gt;   API Status:  Connected (Python API handle initialized) </span></span>
<span><span class="co">#&gt;   Available Templates (Examples):  AMYGDALA, ARA, BRODMANN, CHARITE, Fischer344, ... (Total: 76)</span></span></code></pre>
<p>(Note: The exact cache path and template list may vary.)</p>
<p>The underlying Python TemplateFlow library uses the
<code>TEMPLATEFLOW_HOME</code> environment variable to determine its
storage location. <code>neuroatlas</code> attempts to set this to its
managed cache path to centralize downloads.</p>
</div>
<div class="section level2">
<h2 id="discovering-templates-and-metadata">Discovering Templates and Metadata<a class="anchor" aria-label="anchor" href="#discovering-templates-and-metadata"></a>
</h2>
<p>Before fetching files, you might want to see what’s available.</p>
<div class="section level3">
<h3 id="listing-available-template-spaces">Listing Available Template Spaces<a class="anchor" aria-label="anchor" href="#listing-available-template-spaces"></a>
</h3>
<p>Use <code><a href="../reference/tflow_spaces.html">tflow_spaces()</a></code> to get a list of all top-level
template space identifiers:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List all available template spaces</span></span>
<span><span class="va">all_templates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tflow_spaces.html">tflow_spaces</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">all_templates</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total templates available:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all_templates</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<p>Example output:</p>
<pre><code><span><span class="co">#&gt; [1] "AMYGDALA" "ARA"      "BRODMANN" "CHARITE"  "Fischer344" "GS"</span></span>
<span><span class="co">#&gt; Total templates available: 76</span></span></code></pre>
<p>You can also filter this list with a pattern (regular
expression):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find all MNI templates</span></span>
<span><span class="va">mni_templates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tflow_spaces.html">tflow_spaces</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"MNI"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_templates</span><span class="op">)</span></span></code></pre></div>
<p>Example output:</p>
<pre><code><span><span class="co">#&gt; [1] "MNI152Lin"           "MNI152NLin2009cAsym" "MNI152NLin6Asym"    </span></span>
<span><span class="co">#&gt; [4] "MNI152NLin6Sym"      "MNIInfant"           "MNIPediatricAsym"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="listing-specific-files-metadata-query">Listing Specific Files (Metadata Query)<a class="anchor" aria-label="anchor" href="#listing-specific-files-metadata-query"></a>
</h3>
<p>To find specific files within a template space based on metadata
(like suffix, resolution, description), use
<code><a href="../reference/tflow_files.html">tflow_files()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find all T1w images for the 'MNI152NLin2009cAsym' space</span></span>
<span><span class="va">mni_t1w_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tflow_files.html">tflow_files</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>,</span>
<span>  query_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"T1w"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mni_t1w_files</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find brain masks for 'MNI152NLin2009cAsym' at 1mm resolution</span></span>
<span><span class="va">mni_brain_masks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tflow_files.html">tflow_files</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>,</span>
<span>  query_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>suffix <span class="op">=</span> <span class="st">"mask"</span>, desc <span class="op">=</span> <span class="st">"brain"</span>, resolution <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_brain_masks</span><span class="op">)</span></span></code></pre></div>
<p>This function returns a character vector of full paths to the files
that TemplateFlow would download/has cached.</p>
</div>
</div>
<div class="section level2">
<h2 id="fetching-templates-with-get_template">Fetching Templates with <code>get_template()</code><a class="anchor" aria-label="anchor" href="#fetching-templates-with-get_template"></a>
</h2>
<p>The primary function for fetching template files is
<code><a href="../reference/get_template.html">get_template()</a></code>. It provides a flexible R interface to the
TemplateFlow archive.</p>
<div class="section level3">
<h3 id="basic-retrieval-volumetric-data">Basic Retrieval (Volumetric Data)<a class="anchor" aria-label="anchor" href="#basic-retrieval-volumetric-data"></a>
</h3>
<p>To get the default MNI T1-weighted brain template (1mm
resolution):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the default template (MNI152NLin2009cAsym T1w brain at 1mm)</span></span>
<span><span class="va">mni_t1w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_template</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_t1w</span><span class="op">)</span></span></code></pre></div>
<p>For this vignette, we’ll simulate the object:</p>
<pre><code><span><span class="co">#&gt; [1] "MNI152NLin2009cAsym_T1w"</span></span></code></pre>
<p>To fetch a specific template space, suffix, and resolution:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get MNI T1w template at 2mm resolution</span></span>
<span><span class="va">mni_t1w_res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_template</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>, </span>
<span>  suffix <span class="op">=</span> <span class="st">"T1w"</span>, </span>
<span>  resolution <span class="op">=</span> <span class="st">"2"</span> <span class="co"># or 2</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_t1w_res2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fetching-other-variants-e-g--masks">Fetching Other Variants (e.g., Masks)<a class="anchor" aria-label="anchor" href="#fetching-other-variants-e-g--masks"></a>
</h3>
<p>You can specify other TemplateFlow entities like <code>desc</code>
(description) and <code>label</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get brain mask for MNI template</span></span>
<span><span class="va">mni_brain_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_template</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"brain"</span>, <span class="co"># 'brain' for brain masks</span></span>
<span>  suffix <span class="op">=</span> <span class="st">"mask"</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"1"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_brain_mask</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-file-paths-only">Getting File Paths Only<a class="anchor" aria-label="anchor" href="#getting-file-paths-only"></a>
</h3>
<p>If you only need the path to the file (e.g., for use with other
tools), set <code>path_only = TRUE</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get just the file path, not the loaded NeuroVol object</span></span>
<span><span class="va">mni_t1w_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_template</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>, </span>
<span>  suffix <span class="op">=</span> <span class="st">"T1w"</span>, </span>
<span>  path_only <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mni_t1w_path</span><span class="op">)</span></span></code></pre></div>
<p>Example output (path will vary):</p>
<pre><code>[1] "/Users/youruser/Library/Caches/org.R-project.R/R/neuroatlas/templateflow/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T1w.nii.gz"</code></pre>
</div>
<div class="section level3">
<h3 id="vectorized-retrieval">Vectorized Retrieval<a class="anchor" aria-label="anchor" href="#vectorized-retrieval"></a>
</h3>
<p><code><a href="../reference/get_template.html">get_template()</a></code> allows one of <code>space</code>,
<code>variant</code>, <code>modality</code>, <code>resolution</code>, or
<code>label</code> to be a vector, returning a named list of
results.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get both 1mm and 2mm resolution templates</span></span>
<span><span class="va">t1_multi_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_template</a></span><span class="op">(</span></span>
<span>  space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>, </span>
<span>  suffix <span class="op">=</span> <span class="st">"T1w"</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span><span class="op">)</span> <span class="co"># Get both 1mm and 2mm</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">t1_multi_res</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Access individual resolutions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">t1_multi_res</span><span class="op">[[</span><span class="st">"1"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="co"># The 1mm NeuroVol</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">t1_multi_res</span><span class="op">[[</span><span class="st">"2"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="co"># The 2mm NeuroVol</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="key-parameters-for-get_template">Key Parameters for <code>get_template()</code><a class="anchor" aria-label="anchor" href="#key-parameters-for-get_template"></a>
</h3>
<ul>
<li>
<code>space</code>: Template identifier (e.g.,
“MNI152NLin2009cAsym”).</li>
<li>
<code>variant</code>: High-level type (e.g., “brain”, “mask”,
“probseg”). Used to infer <code>desc</code> and <code>suffix</code> for
common cases.</li>
<li>
<code>modality</code>: Image type (e.g., “T1w”, “T2w”). Used to
infer <code>suffix</code>.</li>
<li>
<code>resolution</code>: Resolution (e.g., “1”, “2”, “01”).</li>
<li>
<code>desc</code>: Specific TemplateFlow <code>desc</code>
field.</li>
<li>
<code>suffix</code>: Specific TemplateFlow <code>suffix</code>
field.</li>
<li>
<code>label</code>: E.g., for <code>variant="probseg"</code>, tissue
labels like “GM”, “CSF”.</li>
<li>
<code>atlas</code>: E.g., “Schaefer2018” if fetching an atlas
file.</li>
<li>
<code>...</code>: Other BIDS-like entities (e.g.,
<code>hemi="L"</code>, <code>den="32k"</code>) can be passed.</li>
</ul>
<p>The function performs pre-flight validation checks for
<code>space</code> and <code>resolution</code> against information
available from TemplateFlow.</p>
</div>
</div>
<div class="section level2">
<h2 id="typed-helper-functions">Typed Helper Functions<a class="anchor" aria-label="anchor" href="#typed-helper-functions"></a>
</h2>
<p>For common tasks, <code>neuroatlas</code> provides convenient
wrappers:</p>
<div class="section level3">
<h3 id="volumetric-data-with-get_volume_template">Volumetric Data with <code>get_volume_template()</code><a class="anchor" aria-label="anchor" href="#volumetric-data-with-get_volume_template"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get T1-weighted volume using the convenience function</span></span>
<span><span class="va">t1_vol</span> <span class="op">&lt;-</span> <span class="fu">get_volume_template</span><span class="op">(</span></span>
<span>  template <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"T1w"</span>, </span>
<span>  resolution <span class="op">=</span> <span class="st">"1"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">t1_vol</span><span class="op">)</span></span></code></pre></div>
<p>Supported <code>type</code>s include “T1w”, “T2w”, “bold”, “probseg”,
“dseg”.</p>
</div>
<div class="section level3">
<h3 id="surface-data-with-get_surface_template">Surface Data with <code>get_surface_template()</code><a class="anchor" aria-label="anchor" href="#surface-data-with-get_surface_template"></a>
</h3>
<p>This helper typically returns file paths, as surfaces are often
handled by specialized geometry software.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get fsLR left hemisphere pial surface</span></span>
<span><span class="va">fslr_pial_L_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_template.html">get_surface_template</a></span><span class="op">(</span></span>
<span>  template_id <span class="op">=</span> <span class="st">"fsLR"</span>,       <span class="co"># e.g., "fsaverage", "fsLR"</span></span>
<span>  surface_type <span class="op">=</span> <span class="st">"pial"</span>,      <span class="co"># e.g., "pial", "white", "inflated"</span></span>
<span>  hemi <span class="op">=</span> <span class="st">"L"</span>,                 <span class="co"># "L" or "R"</span></span>
<span>  density <span class="op">=</span> <span class="st">"32k"</span>             <span class="co"># e.g., "32k", "164k" (for fsLR)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fslr_pial_L_path</span><span class="op">)</span></span></code></pre></div>
<p>Example output (path will vary):</p>
<pre><code>[1] "/Users/youruser/Library/Caches/org.R-project.R/R/neuroatlas/templateflow/tpl-fsLR/tpl-fsLR_den-32k_hemi-L_desc-pial_surf.gii"</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="caching-behavior">Caching Behavior<a class="anchor" aria-label="anchor" href="#caching-behavior"></a>
</h2>
<p><code>neuroatlas</code> and TemplateFlow employ multiple layers of
caching: 1. <strong>R-level Memoisation</strong>:
<code><a href="../reference/get_template.html">get_template()</a></code> memoises the <em>file paths</em> it
resolves. If you request the same template with identical parameters
multiple times in an R session, the path is retrieved from this memory
cache. If <code>path_only=FALSE</code>, <code><a href="../reference/as_neurovol.html">as_neurovol()</a></code>
(which loads the NIfTI file) is also memoised, so the
<code>NeuroVol</code> object itself is cached in memory for the session
if the same path is read again. 2. <strong>Python Disk Cache</strong>:
The underlying Python <code>templateflow</code> library maintains a disk
cache for downloaded files. <code>neuroatlas</code> configures this to
use a directory like <code>~/.cache/neuroatlas/templateflow</code> (path
varies by OS). Once a file is downloaded, subsequent requests (even in
new R sessions) will use the disk-cached version if
<code>TEMPLATEFLOW_HOME</code> remains consistent.</p>
<p>You can inspect and manage the <code>neuroatlas</code>-specific
TemplateFlow cache:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show the path to the cache directory</span></span>
<span><span class="va">cache_loc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/show_templateflow_cache_path.html">show_templateflow_cache_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cache_loc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clear the disk cache and R-level memoisation for TemplateFlow paths</span></span>
<span><span class="co"># clear_templateflow_cache()                 # Asks for confirmation if interactive</span></span>
<span><span class="co"># clear_templateflow_cache(confirm = FALSE)  # Clears without asking</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="integration-with-other-neuroatlas-functions">Integration with Other <code>neuroatlas</code> Functions<a class="anchor" aria-label="anchor" href="#integration-with-other-neuroatlas-functions"></a>
</h2>
<p>The <code>outspace</code> argument in functions like
<code><a href="../reference/get_schaefer_atlas.html">get_schaefer_atlas()</a></code> can accept TemplateFlow
identifiers:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load Schaefer atlas resampled to a TemplateFlow space</span></span>
<span><span class="va">schaefer_in_mni</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_schaefer_atlas.html">get_schaefer_atlas</a></span><span class="op">(</span></span>
<span>  parcels <span class="op">=</span> <span class="st">"100"</span>, </span>
<span>  networks <span class="op">=</span> <span class="st">"7"</span>,</span>
<span>  outspace <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span> <span class="co"># Resolves to default 1mm T1w brain</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or be more specific with a list:</span></span>
<span><span class="va">schaefer_in_mni_res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_schaefer_atlas.html">get_schaefer_atlas</a></span><span class="op">(</span></span>
<span>  parcels <span class="op">=</span> <span class="st">"100"</span>,</span>
<span>  networks <span class="op">=</span> <span class="st">"7"</span>,</span>
<span>  outspace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>space <span class="op">=</span> <span class="st">"MNI152NLin2009cAsym"</span>, resolution <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">schaefer_in_mni_res2</span><span class="op">)</span></span></code></pre></div>
<p>This uses an internal helper <code><a href="../reference/dot-resolve_template_input.html">.resolve_template_input()</a></code>
to fetch the template and extract its <code>NeuroSpace</code>
information.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The <code>neuroatlas</code> package provides a comprehensive R
interface to TemplateFlow:</p>
<ul>
<li>
<strong>Easy Setup</strong>: Use <code><a href="../reference/create_templateflow.html">create_templateflow()</a></code>
to initialize the interface</li>
<li>
<strong>Discovery</strong>: Find templates with
<code><a href="../reference/tflow_spaces.html">tflow_spaces()</a></code> and <code><a href="../reference/tflow_files.html">tflow_files()</a></code>
</li>
<li>
<strong>Flexible Retrieval</strong>: Use <code><a href="../reference/get_template.html">get_template()</a></code>
with various parameters</li>
<li>
<strong>Integration</strong>: Use TemplateFlow spaces directly in
atlas functions</li>
<li>
<strong>Caching</strong>: Automatic caching at both R and Python
levels</li>
</ul>
</div>
<div class="section level2">
<h2 id="further-information">Further Information<a class="anchor" aria-label="anchor" href="#further-information"></a>
</h2>
<p>For more details on TemplateFlow itself, including the full range of
available templates and BIDS-inspired naming conventions, please visit
the <a href="https://www.templateflow.org/" class="external-link">TemplateFlow
website</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
