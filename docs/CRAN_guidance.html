<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CRAN Documentation Compliance Strategy (roxygen2) • neuroatlas</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CRAN Documentation Compliance Strategy (roxygen2)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">neuroatlas</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/neuroatlas-overview.html">Getting Started with neuroatlas</a></li>
    <li><a class="dropdown-item" href="articles/working-with-templateflow.html">Working with TemplateFlow in neuroatlas</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/bbuchsbaum/neuroatlas/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CRAN Documentation Compliance Strategy (roxygen2)</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/neuroatlas/blob/HEAD/CRAN_guidance.md"><code>CRAN_guidance.md</code></a></small>
    </div>


<p>Okay, this is a very strong foundation. By incorporating the excellent review feedback, we can refine it into an even more comprehensive and polished guide.</p>
<p>Here’s the integrated and enhanced Markdown guide:</p>
<hr><div id="cran-documentation-compliance-strategy-roxygen2" class="section level1">

<p>A comprehensive guide for creating CRAN-compliant documentation using <code>roxygen2</code>. Following these practices will significantly smooth your CRAN submission process.</p>
<div class="section level2">
<h2 id="core-principle">Core Principle<a class="anchor" aria-label="anchor" href="#core-principle"></a></h2>
<p><strong>All exported functions, datasets, and classes must be documented.</strong> No exceptions.</p>
</div>
<div class="section level2">
<h2 id="i-essential-function-documentation">I. Essential Function Documentation<a class="anchor" aria-label="anchor" href="#i-essential-function-documentation"></a></h2>
<div class="section level3">
<h3 id="required-tags-for-exported-functions">Required Tags for Exported Functions<a class="anchor" aria-label="anchor" href="#required-tags-for-exported-functions"></a></h3>
<p><strong>Title &amp; Description:</strong> The first sentence is the title (sentence case, no period at the end if it’s a phrase). Subsequent paragraphs form the description.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Compute Summary Statistics</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Calculates descriptive statistics for numeric data, handling missing</span></span>
<span><span class="co">#' values and providing multiple summary measures in a consistent format.</span></span></code></pre></div>
<p><strong>Parameters (<code>@param</code>):</strong> Document every argument, specifying its type and purpose.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @param x A numeric vector or matrix.</span></span>
<span><span class="co">#' @param na.rm Logical; if TRUE, NA values are removed before computation.</span></span>
<span><span class="co">#' @param method Character string specifying computation method: "fast" or "robust".</span></span></code></pre></div>
<p><strong>Return Value (<code>@return</code>):</strong> Clearly describe the object returned. For complex objects, use <code>\item{}</code> for lists or describe data frame columns.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @return A named list with elements:</span></span>
<span><span class="co">#'   \item{mean}{Arithmetic mean.}</span></span>
<span><span class="co">#'   \item{median}{Median value.}</span></span>
<span><span class="co">#'   \item{sd}{Standard deviation.}</span></span>
<span><span class="co">#'   Returns NULL if input is empty after NA removal.</span></span></code></pre></div>
<p><strong>Examples (<code>@examples</code>):</strong> Provide runnable examples. See “VII. Examples Best Practices” for details.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @examples</span></span>
<span><span class="co">#' # Basic usage</span></span>
<span><span class="co">#' x &lt;- c(1, 2, 3, NA, 5)</span></span>
<span><span class="co">#' compute_stats(x, na.rm = TRUE)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' # With matrix input</span></span>
<span><span class="co">#' m &lt;- matrix(1:12, nrow = 3)</span></span>
<span><span class="co">#' compute_stats(m)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' \donttest{</span></span>
<span><span class="co">#'   # Slower example (&gt;5 seconds or requires special conditions)</span></span>
<span><span class="co">#'   if (requireNamespace("largedata", quietly = TRUE)) {</span></span>
<span><span class="co">#'     # Simulating data generation for example</span></span>
<span><span class="co">#'     # big_data &lt;- largedata::generate_data(1e6)</span></span>
<span><span class="co">#'     # compute_stats(big_data, method = "robust")</span></span>
<span><span class="co">#'   }</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
<p><strong>Export (<code>@export</code>):</strong> This tag makes the function available to users and signals <code>roxygen2</code> to generate documentation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @export</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-but-recommended-tags">Optional But Recommended Tags<a class="anchor" aria-label="anchor" href="#optional-but-recommended-tags"></a></h3>
<p><strong>Details (<code>@details</code>):</strong> For elaborate explanations, algorithms, or technical specifics.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @details</span></span>
<span><span class="co">#' Uses Welford's online algorithm for numerically stable computation.</span></span>
<span><span class="co">#' For matrices, statistics are computed column-wise.</span></span></code></pre></div>
<p><strong>See Also (<code>@seealso</code>):</strong> Link to related functions using <code>\code{\link{function_name}}</code> or <code>\code{\link[package]{function_name}}</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @seealso</span></span>
<span><span class="co">#' \code{\link{base_stats}} for basic statistics,</span></span>
<span><span class="co">#' \code{\link[stats]{summary}} for R's built-in summary.</span></span></code></pre></div>
<p><strong>References (<code>@references</code>):</strong> Cite relevant publications or sources. Use <code>\doi{}</code> for DOIs.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @references</span></span>
<span><span class="co">#' Welford, B. P. (1962). Note on a method for calculating corrected</span></span>
<span><span class="co">#' sums of squares and products. Technometrics, 4(3), 419-420.</span></span>
<span><span class="co">#' \doi{10.1080/00401706.1962.10490022}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="inheriting-documentation-use-sparingly">Inheriting Documentation (Use Sparingly)<a class="anchor" aria-label="anchor" href="#inheriting-documentation-use-sparingly"></a></h3>
<p>To avoid duplication across related functions or methods: - <strong><code>@inheritParams function_name</code></strong>: Inherits <code>@param</code> tags from another function. - <strong><code>@inheritDotParams function_name arg1 arg2 ...</code></strong>: Inherits documentation for specific arguments passed via <code>...</code>. - <strong><code>@inheritSection function_name SectionTitle</code></strong>: Inherits a whole section (e.g., “Details”) from another function’s documentation. - <strong><code>@inherit allgemein_generic_function</code></strong>: For S4 methods, can inherit documentation from the generic.</p>
<p>Use these only when the inherited documentation is <em>exactly</em> appropriate.</p>
</div>
</div>
<div class="section level2">
<h2 id="ii-package-level-documentation">II. Package-Level Documentation<a class="anchor" aria-label="anchor" href="#ii-package-level-documentation"></a></h2>
<p>Create a dedicated file, typically <code>R/yourpackage-package.R</code> (or <code>R/package_name.R</code>), for package-level documentation. This file should generally <em>not</em> contain other function definitions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @keywords internal</span></span>
<span><span class="st">"_PACKAGE"</span></span>
<span></span>
<span><span class="co">## usethis namespace: start</span></span>
<span><span class="co">## (Place @importFrom directives here if desired, or manage them elsewhere)</span></span>
<span><span class="co">## usethis namespace: end</span></span>
<span><span class="cn">NULL</span></span>
<span></span>
<span><span class="co">#' yourpackage: A Brief Package Title</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' A paragraph (or more) describing what the package does, its main purpose,</span></span>
<span><span class="co">#' and its key features. This is often the first thing users see.</span></span>
<span><span class="co">#' Point users to key functions to get started, e.g.,</span></span>
<span><span class="co">#' "For an overview of the main functionalities, see \code{\link{main_function}}</span></span>
<span><span class="co">#' and the package vignette: \code{vignette("your-vignette-name", package = "yourpackage")}".</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @section Main Functions:</span></span>
<span><span class="co">#' An optional section to highlight key functions.</span></span>
<span><span class="co">#' \itemize{</span></span>
<span><span class="co">#'   \item \code{\link{function1}}: Performs task X, crucial for getting started.</span></span>
<span><span class="co">#'   \item \code{\link{function2}}: Implements advanced feature Y.</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @docType package</span></span>
<span><span class="co">#' @name yourpackage-package # Or just yourpackage</span></span>
<span><span class="co">#' @aliases yourpackage</span></span>
<span><span class="co">#' @author Your Name &lt;your.email@example.com&gt; [cre, aut] (See DESCRIPTION for full author list)</span></span>
<span><span class="cn">NULL</span></span></code></pre></div>
<p><strong>Key Points:</strong> - <code>"_PACKAGE"</code> with <code>@keywords internal</code>: The recommended way to anchor package-level documentation using <code>roxygen2</code>. <code>"_PACKAGE"</code> itself is not documented. - <code>@docType package</code> and <code>@name yourpackage-package</code> (or <code>@name yourpackage</code>) are essential. - <code>@aliases yourpackage</code>: Allows <code>?yourpackage</code> to work. - The <code>## usethis namespace:</code> comments are for <code>usethis</code> to manage <code>@importFrom</code> tags if you choose to colocate them here.</p>
</div>
<div class="section level2">
<h2 id="iii-s3-methods-documentation">III. S3 Methods Documentation<a class="anchor" aria-label="anchor" href="#iii-s3-methods-documentation"></a></h2>
<p><strong>Generic Function:</strong> Document the generic fully, including <code>@param</code>, <code>@return</code>, and <code>@examples</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Summarize Data Objects</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Generic function for creating summaries of various data types.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param x Object to summarize.</span></span>
<span><span class="co">#' @param ... Additional arguments passed to methods.</span></span>
<span><span class="co">#' @return A summary object (class depends on input type).</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' # Example for a numeric vector</span></span>
<span><span class="co">#' summarize_data(c(1, 2, 3, NA, 5), na.rm = TRUE)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' # Example for a data frame (will dispatch to data.frame method)</span></span>
<span><span class="co">#' df &lt;- data.frame(a = 1:3, b = letters[1:3])</span></span>
<span><span class="co">#' summarize_data(df)</span></span>
<span><span class="va">summarize_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">UseMethod</a></span><span class="op">(</span><span class="st">"summarize_data"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Methods (grouped documentation using <code>@rdname</code>):</strong> Use <code>@rdname</code> to link method documentation to the generic’s documentation file.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @rdname summarize_data</span></span>
<span><span class="co">#' @method summarize_data numeric</span></span>
<span><span class="co">#' @param na.rm Logical; if TRUE, NAs are removed (specific to numeric method).</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">summarize_data.numeric</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">na.rm</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="va">na.rm</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @rdname summarize_data</span></span>
<span><span class="co">#' @method summarize_data data.frame</span></span>
<span><span class="co">#' @param columns Character vector of column names to summarize (default: all numeric).</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">summarize_data.data.frame</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">columns</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation</span></span>
<span>  <span class="co"># Select numeric columns if 'columns' is NULL</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">columns</span><span class="op">)</span><span class="op">)</span> <span class="va">columns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">is.numeric</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">columns</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span>, <span class="va">summarize_data.numeric</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Important:</strong> - Use <code>@method generic_name class_name</code> to properly register S3 methods in the <code>NAMESPACE</code> file. <code>roxygen2</code> handles this. - If a method has identical parameters and return value structure to the generic, you might not need to repeat <code>@param</code> or <code>@return</code>. Use <code>@describeIn generic_name Short description of this method.</code> for brevity.</p>
</div>
<div class="section level2">
<h2 id="iv-dataset-documentation">IV. Dataset Documentation<a class="anchor" aria-label="anchor" href="#iv-dataset-documentation"></a></h2>
<p>Place data (e.g., <code>survey_data.rda</code>) in the <code>data/</code> directory. Create a documentation file (e.g., <code>R/data.R</code>):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Example Survey Data</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Survey responses from 500 participants collected in 2023 for</span></span>
<span><span class="co">#' demonstrating statistical analysis techniques. Contains demographic</span></span>
<span><span class="co">#' information and Likert scale responses.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @format A data frame with 500 rows and 8 columns:</span></span>
<span><span class="co">#' \describe{</span></span>
<span><span class="co">#'   \item{id}{Participant ID (integer).}</span></span>
<span><span class="co">#'   \item{age}{Age in years (numeric, range 18-65).}</span></span>
<span><span class="co">#'   \item{gender}{Gender identity (factor: "Male", "Female", "Other").}</span></span>
<span><span class="co">#'   \item{response}{Survey response score (numeric, 1-10 scale).}</span></span>
<span><span class="co">#'   \item{group}{Treatment group (factor: "Control", "Treatment").}</span></span>
<span><span class="co">#'   \item{date}{Response date (Date object).}</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#' @source Simulated data based on typical survey patterns. Generated using `scripts/generate_survey_data.R`.</span></span>
<span><span class="co">#' @keywords datasets</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' data(survey_data)</span></span>
<span><span class="co">#' str(survey_data)</span></span>
<span><span class="co">#' summary(survey_data$response)</span></span>
<span><span class="co">#' if (requireNamespace("ggplot2", quietly = TRUE)) {</span></span>
<span><span class="co">#'   ggplot2::ggplot(survey_data, ggplot2::aes(x = age, y = response, color = gender)) +</span></span>
<span><span class="co">#'     ggplot2::geom_point()</span></span>
<span><span class="co">#' }</span></span>
<span><span class="st">"survey_data"</span> <span class="co"># The name must match the .rda file (without extension)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="v-internal-functions">V. Internal Functions<a class="anchor" aria-label="anchor" href="#v-internal-functions"></a></h2>
<p><strong>For True Helper Functions (<code>@noRd</code>):</strong> These functions are not exported and no <code>.Rd</code> file is generated. They are invisible to users.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Internal helper for data validation</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Checks input data format and throws informative errors. Not intended</span></span>
<span><span class="co">#' for direct user calls.</span></span>
<span><span class="co">#' @param data Input data to validate.</span></span>
<span><span class="co">#' @param required_cols Required column names.</span></span>
<span><span class="co">#' @return TRUE if valid, throws error otherwise.</span></span>
<span><span class="co">#' @noRd</span></span>
<span><span class="va">validate_input</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">required_cols</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>For Internal Functions That Might Be Useful to Power Users (<code>@keywords internal</code>):</strong> These functions are not exported by default (unless <code>@export</code> is also added, which is rare for internals) but an <code>.Rd</code> file is generated. This documentation is typically hidden from the main help index but can be accessed via <code>?yourpackage:::advanced_internal</code> or <code>help("advanced_internal", help_type = "html")</code> (if known).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Advanced internal processing function</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function performs a specialized internal task. It is exposed for</span></span>
<span><span class="co">#' debugging or advanced usage by developers familiar with the package internals,</span></span>
<span><span class="co">#' but it is not part of the stable, public API and may change without notice.</span></span>
<span><span class="co">#' @param x Input parameter for advanced processing.</span></span>
<span><span class="co">#' @return Processed result.</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="co"># @export # Typically NOT exported</span></span>
<span><span class="va">advanced_internal_processor</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vi-namespace-management-with-roxygen2">VI. NAMESPACE Management with roxygen2<a class="anchor" aria-label="anchor" href="#vi-namespace-management-with-roxygen2"></a></h2>
<p>Manage imports directly in your <code>.R</code> files, often at the top or in the package-level documentation file.</p>
<p><strong>Specific Imports:</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @importFrom stats median sd lm</span></span>
<span><span class="co">#' @importFrom utils head tail</span></span></code></pre></div>
<p><strong>Best Practices:</strong> - ✅ <strong>Prefer specific imports:</strong> <code>@importFrom pkg function1 function2</code>. This is the clearest and safest. - ⚠️ <strong>Use whole package imports cautiously:</strong> <code>@import pkg</code> should be avoided unless you use many functions from <code>pkg</code> very frequently across multiple files. It increases the risk of namespace conflicts. - ✅ <strong>Explicit namespacing in code:</strong> Using <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code> or <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code> in your code is often the most robust approach, even if you also have <code>@importFrom</code>. It makes dependencies obvious.</p>
</div>
<div class="section level2">
<h2 id="vii-examples-best-practices-examples">VII. Examples Best Practices (<code>@examples</code>)<a class="anchor" aria-label="anchor" href="#vii-examples-best-practices-examples"></a></h2>
<div class="section level3">
<h3 id="general-guidelines">General Guidelines<a class="anchor" aria-label="anchor" href="#general-guidelines"></a></h3>
<ul><li>
<strong><code>@examples</code> must run without errors or warnings</strong> during <code>R CMD check --as-cran</code>.</li>
<li>Even code wrapped in <code>\donttest{}</code> <strong>is still run by CRAN</strong> during their checks (e.g., when generating <code>pkg-Ex.Rout</code>). <code>\donttest{}</code> primarily means that if this specific example block fails, it won’t <em>cause the check itself to fail</em> for that reason alone, but CRAN might still flag issues found.</li>
<li>
<strong><code>\dontrun{}</code> should be avoided</strong> unless absolutely necessary (e.g., functions that open GUIs, modify global options irreversibly, require authentication, or write files outside <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>). Justify its use in <code>cran-comments.md</code>.</li>
<li>
<strong><code>\dontshow{}</code></strong> is for code that should be run but whose output is not illustrative for the user (e.g., setup like <code>old_opts &lt;- options(...)</code>, cleanup like <code>options(old_opts)</code>, or setting temporary directories).</li>
</ul></div>
<div class="section level3">
<h3 id="timing-guidelines">Timing Guidelines<a class="anchor" aria-label="anchor" href="#timing-guidelines"></a></h3>
<ul><li>
<strong>Target:</strong> Strive for each individual example (and certainly each example <em>file</em>) to run quickly. CRAN is sensitive to total example runtime (e.g., aiming for &lt;5-10 seconds per file, ideally much less).</li>
<li>
<strong>Use <code>\donttest{}</code></strong> for examples that are correct but might:
<ul><li>Take longer than a few seconds (e.g., &gt; 5s).</li>
<li>Require an internet connection.</li>
<li>Depend on suggested packages (always guard with <code>if (requireNamespace(...))</code>).</li>
<li>Need special system conditions not universally available.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="file-system-safety-in-examples">File System Safety in Examples<a class="anchor" aria-label="anchor" href="#file-system-safety-in-examples"></a></h3>
<p>If examples need to write files, <strong>always use <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code></strong> and clean up.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @examples</span></span>
<span><span class="co">#' \dontshow{</span></span>
<span><span class="co">#' # CRAN-safe temporary directory for example output</span></span>
<span><span class="co">#' old_wd &lt;- setwd(tempdir())</span></span>
<span><span class="co">#' old_dir_to_create &lt;- "my_temp_example_dir"</span></span>
<span><span class="co">#' if (!dir.exists(old_dir_to_create)) dir.create(old_dir_to_create)</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' # Example that writes a file</span></span>
<span><span class="co">#' my_data_frame &lt;- data.frame(a = 1:3, b = letters[1:3])</span></span>
<span><span class="co">#' # write.csv(my_data_frame, file.path(old_dir_to_create, "temp_file.csv"))</span></span>
<span><span class="co">#' # message("File written to: ", file.path(tempdir(), old_dir_to_create, "temp_file.csv"))</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' \dontshow{</span></span>
<span><span class="co">#' # Cleanup: remove created files/directories and restore working directory</span></span>
<span><span class="co">#' # unlink(file.path(old_dir_to_create, "temp_file.csv"))</span></span>
<span><span class="co">#' # unlink(old_dir_to_create, recursive = TRUE)</span></span>
<span><span class="co">#' setwd(old_wd)</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conditional-examples">Conditional Examples<a class="anchor" aria-label="anchor" href="#conditional-examples"></a></h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @examples</span></span>
<span><span class="co">#' # Basic example (always runs)</span></span>
<span><span class="co">#' basic_function_call(1:10)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' \donttest{</span></span>
<span><span class="co">#'   # Example depending on a suggested package</span></span>
<span><span class="co">#'   if (requireNamespace("ggplot2", quietly = TRUE)) {</span></span>
<span><span class="co">#'     # data_for_plot &lt;- ...</span></span>
<span><span class="co">#'     # ggplot2::ggplot(data_for_plot) + ggplot2::geom_point()</span></span>
<span><span class="co">#'   }</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#'   # Example requiring internet (and ideally interactive session)</span></span>
<span><span class="co">#'   if (interactive() &amp;&amp; curl::has_internet()) {</span></span>
<span><span class="co">#'     # downloaded_content &lt;- download_function_from_web("https://example.com/data.txt")</span></span>
<span><span class="co">#'   }</span></span>
<span><span class="co">#' }</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="viii-description-file-essentials">VIII. DESCRIPTION File Essentials<a class="anchor" aria-label="anchor" href="#viii-description-file-essentials"></a></h2>
<p>The <code>DESCRIPTION</code> file is critical and its contents are used by CRAN and in help pages.</p>
<pre class="dcf"><code>Package: yourpackage
Type: Package
Title: Your Package Title in Sentence Case (No Period at End)
Version: 0.1.0
Authors@R:
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),  # Author and Creator/Maintainer
           email = "first.last@example.com",
           comment = c(ORCID = "0000-0000-0000-0000"))
Description: A comprehensive, multi-sentence description of what the
    package does. Explain its main purpose, key functionalities, and
    primary use cases. This can span multiple indented lines.
License: MIT + file LICENSE  # Or GPL-3, Apache 2.0, etc. Must be CRAN-compatible.
Encoding: UTF-8
Language: en-US
LazyData: false # Recommended; if true, consider data compression.
RoxygenNote: 7.3.1 # Updated by roxygen2
URL: https://github.com/yourname/yourpackage, https://yourpackage.r-universe.dev
BugReports: https://github.com/yourname/yourpackage/issues
Depends:
    R (&gt;= 3.5.0) # Specify minimum R version
Imports:
    stats,         # For median, sd, etc.
    utils          # For head, tail
Suggests:
    knitr,
    rmarkdown,     # For vignettes
    testthat (&gt;= 3.0.0), # For tests
    ggplot2        # For examples or vignettes
# VignetteBuilder: knitr # Added if you have vignettes (see Section XII)
# Compression: xz # Consider if LazyData: true or large data files</code></pre>
<p><strong>Key Fields:</strong> - <strong><code>Title</code></strong>: Sentence case, concise. - <strong><code>Description</code></strong>: More detailed, 1-2 paragraphs. - <strong><code>Authors@R</code></strong>: Canonical way to list authors and roles. - <strong><code>License</code></strong>: Must be an OSI-approved open-source license accepted by CRAN. Include the actual <code>LICENSE</code> (and <code>LICENSE.md</code> if <code>MIT + file LICENSE</code>). - <strong><code>Encoding: UTF-8</code></strong>: Essential if using non-ASCII characters in code or docs. - <strong><code>LazyData: false</code></strong>: Generally preferred by CRAN. If <code>true</code>, consider <code>Compression: xz</code> or other methods to keep package size small. - <strong><code>URL</code> / <code>BugReports</code></strong>: Links to development site/issue tracker.</p>
</div>
<div class="section level2">
<h2 id="ix-quality-control-workflow">IX. Quality Control Workflow<a class="anchor" aria-label="anchor" href="#ix-quality-control-workflow"></a></h2>
<div class="section level3">
<h3 id="essential-local-checks">Essential Local Checks<a class="anchor" aria-label="anchor" href="#essential-local-checks"></a></h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Generate documentation and NAMESPACE</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># or roxygen2::roxygenise()</span></span>
<span></span>
<span><span class="co"># 2. Run comprehensive CRAN checks (THE GOLD STANDARD)</span></span>
<span><span class="co"># This will also build and check vignettes if present.</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span>cran <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Check for spelling errors in documentation</span></span>
<span><span class="co"># Add a WORDLIST file for technical terms.</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/spell_check.html" class="external-link">spell_check</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4. Validate all URLs in documentation, DESCRIPTION, etc.</span></span>
<span><span class="fu">urlchecker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/urlchecker/man/url_check.html" class="external-link">url_check</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multi-platform-testing-crucial-before-submission">Multi-Platform Testing (Crucial Before Submission)<a class="anchor" aria-label="anchor" href="#multi-platform-testing-crucial-before-submission"></a></h3>
<p>Use services to check on platforms you don’t have access to:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Windows (devel and release)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check_win.html" class="external-link">check_win_devel</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check_win.html" class="external-link">check_win_release</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># If available</span></span>
<span></span>
<span><span class="co"># macOS</span></span>
<span><span class="co"># devtools::check_mac_release() # (Often relies on external services or specific local setup)</span></span>
<span></span>
<span><span class="co"># R-hub builder (various Linux distributions, Windows, macOS)</span></span>
<span><span class="co"># devtools::check_rhub() or rhub::check_for_cran()</span></span>
<span><span class="fu">rhub</span><span class="fu">::</span><span class="fu"><a href="https://r-hub.github.io/rhub/reference/check_for_cran.html" class="external-link">check_for_cran</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Simpler interface for CRAN-like checks</span></span>
<span></span>
<span><span class="co"># Check results from these services thoroughly.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="target-0-errors-0-warnings-0-notes">Target: 0 errors, 0 warnings, 0 notes<a class="anchor" aria-label="anchor" href="#target-0-errors-0-warnings-0-notes"></a></h3>
<p>Address every issue. If a NOTE is unavoidable and justified (rare), explain it comprehensively in your <code>cran-comments.md</code> file submitted with the package.</p>
</div>
</div>
<div class="section level2">
<h2 id="x-common-cran-pitfalls-to-avoid">X. Common CRAN Pitfalls to Avoid<a class="anchor" aria-label="anchor" href="#x-common-cran-pitfalls-to-avoid"></a></h2>
<table class="table"><colgroup><col width="29%"><col width="70%"></colgroup><thead><tr class="header"><th>Issue</th>
<th>Solution / Best Practice</th>
</tr></thead><tbody><tr class="odd"><td>Missing <code>@export</code>
</td>
<td>Add to all user-facing functions, classes, methods.</td>
</tr><tr class="even"><td>Undocumented exported objects</td>
<td>Document <em>every</em> exported object (functions, data, classes).</td>
</tr><tr class="odd"><td>Slow examples (<code>@examples</code>)</td>
<td>Use <code>\donttest{}</code> for examples &gt;~5 seconds; optimize code.</td>
</tr><tr class="even"><td>
<code>\dontrun{}</code> overuse</td>
<td>Only for examples that truly cannot be run safely/automatically by CRAN. Justify heavily.</td>
</tr><tr class="odd"><td>Errors/Warnings in examples</td>
<td>Examples must run cleanly. Debug or use conditional logic.</td>
</tr><tr class="even"><td>Broken URLs</td>
<td>Check with <code><a href="https://rdrr.io/pkg/urlchecker/man/url_check.html" class="external-link">urlchecker::url_check()</a></code> and fix.</td>
</tr><tr class="odd"><td>Writing to file system outside <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>
</td>
<td>Always use <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> in examples/tests and clean up.</td>
</tr><tr class="even"><td>Non-ASCII characters without <code>Encoding</code>
</td>
<td>Add <code>Encoding: UTF-8</code> to <code>DESCRIPTION</code> and save files as UTF-8.</td>
</tr><tr class="odd"><td>Typos/Grammar</td>
<td>Use <code><a href="https://devtools.r-lib.org/reference/spell_check.html" class="external-link">devtools::spell_check()</a></code>; proofread carefully.</td>
</tr><tr class="even"><td>Incorrect <code>Title:</code> / <code>Description:</code> case</td>
<td>Use Sentence case for <code>Title:</code> fields, standard paragraph for <code>Description:</code>.</td>
</tr><tr class="odd"><td>Missing or incorrect <code>License</code>
</td>
<td>Use a CRAN-accepted open-source license; ensure <code>LICENSE</code> file is correct.</td>
</tr><tr class="even"><td>Vignettes fail to build or are slow</td>
<td>Ensure vignettes are robust, efficient, and build correctly.</td>
</tr></tbody></table></div>
<div class="section level2">
<h2 id="xi-pro-tips-for-smooth-submissions">XI. Pro Tips for Smooth Submissions<a class="anchor" aria-label="anchor" href="#xi-pro-tips-for-smooth-submissions"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Use <code>usethis</code> for Setup:</strong>
<ul><li>
<code><a href="https://usethis.r-lib.org/reference/use_package_doc.html" class="external-link">usethis::use_package_doc()</a></code>: Sets up package-level documentation file.</li>
<li>
<code><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">usethis::use_data()</a></code>: Prepares datasets for inclusion in <code>data/</code> and optionally creates <code>R/data.R</code>.</li>
<li>
<code>usethis::use_vignette("my-vignette-title")</code>: Creates a vignette template.</li>
<li>
<code><a href="https://usethis.r-lib.org/reference/licenses.html" class="external-link">usethis::use_mit_license()</a></code>, <code><a href="https://usethis.r-lib.org/reference/licenses.html" class="external-link">usethis::use_gpl3_license()</a></code>, etc.: Sets up license files.</li>
<li>
<code><a href="https://usethis.r-lib.org/reference/use_testthat.html" class="external-link">usethis::use_testthat()</a></code>: Sets up testing infrastructure.</li>
</ul></li>
<li>
<strong>Consistent Documentation Style:</strong>
<ul><li>Use active voice and clear, concise language.</li>
<li>Be very specific in <code>@param</code> descriptions (e.g., “A numeric vector.” not just “Input.”).</li>
<li>Ensure <code>@return</code> clearly describes the output’s class and structure.</li>
<li>Include examples for common use cases and important edge cases.</li>
</ul></li>
<li>
<strong>Test Early, Test Often:</strong>
<ul><li>Run <code>devtools::check(cran = TRUE)</code> frequently during development, not just before submission.</li>
<li>Address issues as they arise; don’t let them accumulate.</li>
</ul></li>
<li>
<strong>Documentation as Code:</strong>
<ul><li>Treat your documentation with the same care as your R code.</li>
<li>Keep documentation comments (<code>#'</code>) physically close to the code they describe.</li>
<li>Update documentation <em>immediately</em> when you change a function’s behavior, arguments, or return value.</li>
<li>Use version control (Git) for documentation changes just as you do for code.</li>
</ul></li>
<li>
<strong>Read “Writing R Extensions”:</strong>
<ul><li>The “Writing R Extensions” manual is the ultimate authority. Refer to it for definitive answers.</li>
</ul></li>
</ol></div>
<div class="section level2">
<h2 id="xii-vignettes-highly-recommended">XII. Vignettes (Highly Recommended)<a class="anchor" aria-label="anchor" href="#xii-vignettes-highly-recommended"></a></h2>
<p>Vignettes are longer-form documents that illustrate how to use your package, often with narrative and extended examples. CRAN reviewers value well-written vignettes.</p>
<ul><li>
<strong>Purpose:</strong> Show practical applications, workflows, or delve into specific functionalities more deeply than function examples allow.</li>
<li>
<strong>Creation:</strong> Use <code>usethis::use_vignette("your-vignette-title")</code>. This creates an <code>.Rmd</code> file in <code>inst/doc/</code>.</li>
<li>
<strong>Format:</strong> R Markdown (<code>.Rmd</code>) is standard.</li>
<li>
<strong>Content:</strong>
<ul><li>Include an introduction explaining the vignette’s purpose.</li>
<li>Use a mix of narrative text and runnable R code chunks.</li>
<li>Ensure code chunks are efficient and don’t produce excessive output.</li>
<li>Make them self-contained if possible.</li>
</ul></li>
<li>
<strong><code>DESCRIPTION</code> file entries:</strong> If you include vignettes, you must declare the builder (usually <code>knitr</code>) and list necessary packages in <code>Suggests</code>: <code>dcf     VignetteBuilder: knitr     Suggests:         knitr,         rmarkdown # And any other packages used ONLY in vignettes</code>
</li>
<li>
<strong>Building and Checking:</strong> <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code> will attempt to build your vignettes. Ensure they build without errors and reasonably quickly.</li>
</ul></div>
<div class="section level2">
<h2 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a></h2>
<ul><li>
<strong><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html" class="external-link">Writing R Extensions</a></strong> (The official manual – indispensable)</li>
<li>
<strong><a href="https://cran.r-project.org/web/packages/policies.html" class="external-link">CRAN Repository Policy</a></strong> (Essential reading)</li>
<li>
<strong><a href="https://r-pkgs.org/" class="external-link">R Packages (2e)</a></strong> by Hadley Wickham and Jennifer Bryan (Excellent practical guide)</li>
<li>
<strong><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2 documentation</a></strong> (For <code>roxygen2</code> specifics)</li>
<li>
<strong><a href="https://cran.r-project.org/web/packages/submission_checklist.html" class="external-link">CRAN Incoming Feasibility</a></strong> (CRAN’s own checklist)</li>
</ul><hr><p><strong>Remember: <code>devtools::check(cran = TRUE)</code> is your best friend. Aim for zero errors, warnings, and notes before submitting to CRAN.</strong></p>
</div>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

