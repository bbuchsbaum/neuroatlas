% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/coordinate_spaces.R
\name{transform_coords}
\alias{transform_coords}
\title{Transform Coordinates Between Spaces}
\usage{
transform_coords(
  coords,
  from = NULL,
  to = NULL,
  transform = NULL,
  coords_as_cols = FALSE
)
}
\arguments{
\item{coords}{Numeric matrix of 3D coordinates to transform. Can be:
\itemize{
  \item An N x 3 matrix (N points, each row is x/y/z)
  \item A 3 x N matrix (if \code{coords_as_cols = TRUE})
  \item A length-3 vector (single point)
}}

\item{from}{Character string specifying the source coordinate space.
One of "MNI305", "MNI152".}

\item{to}{Character string specifying the target coordinate space.
One of "MNI305", "MNI152".}

\item{transform}{Optional 4x4 affine matrix. If provided, \code{from} and
\code{to} are ignored and this matrix is applied directly.}

\item{coords_as_cols}{Logical. If \code{TRUE}, coordinates are in columns
(3 x N matrix). If \code{FALSE} (default), coordinates are in rows
(N x 3 matrix).}
}
\value{
Transformed coordinates in the same format as the input.
}
\description{
Apply an affine transformation to convert 3D coordinates from one
neuroimaging coordinate space to another.
}
\details{
The transformation is applied as: \code{p' = M \%*\% [p; 1]} where M is
the 4x4 affine matrix and p is each 3D point in homogeneous coordinates.
}
\examples{
# Transform a single point
p305 <- c(10, -20, 35)
p152 <- transform_coords(p305, from = "MNI305", to = "MNI152")
print(p152)

# Transform multiple points (N x 3 matrix)
points_305 <- rbind(
  c(10, -20, 35),
  c(0, 0, 0),
  c(-30, 15, 50)
)
points_152 <- transform_coords(points_305, from = "MNI305", to = "MNI152")
print(points_152)

# Round-trip: MNI305 -> MNI152 -> MNI305
p_roundtrip <- transform_coords(
  transform_coords(p305, "MNI305", "MNI152"),
  "MNI152", "MNI305"
)
all.equal(p305, p_roundtrip, tolerance = 1e-10)

}
\seealso{
\code{\link{get_space_transform}}, \code{\link{MNI305_to_MNI152}}
}
